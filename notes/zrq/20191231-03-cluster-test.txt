#
# <meta:header>
#   <meta:licence>
#     Copyright (c) 2019, ROE (http://www.roe.ac.uk/)
#
#     This information is free software: you can redistribute it and/or modify
#     it under the terms of the GNU General Public License as published by
#     the Free Software Foundation, either version 3 of the License, or
#     (at your option) any later version.
#
#     This information is distributed in the hope that it will be useful,
#     but WITHOUT ANY WARRANTY; without even the implied warranty of
#     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#     GNU General Public License for more details.
#
#     You should have received a copy of the GNU General Public License
#     along with this program.  If not, see <http://www.gnu.org/licenses/>.
#   </meta:licence>
# </meta:header>
#
#zrq-notes-time
#zrq-notes-indent
#zrq-notes-ansible
#zrq-notes-osformat
#

    #
    # Previous test failed - delete everything from the gaia-test project to make space.
    #

# -----------------------------------------------------
# Set the project and cluster names.
#[user@openstacker]

    cloudname=gaia-prod
    clustername=Augustus

# -----------------------------------------------------
# List our clusters.
#[user@openstacker]

    time \
        openstack \
            --os-cloud "${cloudname:?}" \
            coe cluster list

--START--
+--------------------------------------+----------+------------------+------------+--------------+---------------+
| uuid                                 | name     | keypair          | node_count | master_count | status        |
+--------------------------------------+----------+------------------+------------+--------------+---------------+
| 17ae1d21-9810-443d-a14d-e33584a4d123 | Augustus | zrq-gaia-keypair |          4 |            2 | CREATE_FAILED |
+--------------------------------------+----------+------------------+------------+--------------+---------------+
--END--

--START--
real	0m4.637s
user	0m0.940s
sys	0m0.109s
--END--

# -----------------------------------------------------
# Create a new cluster, using unrestricted credentials.
#[user@openstacker]

    time \
        openstack \
            --os-cloud "${cloudname:?}-super" \
            coe cluster create \
                --keypair "${keyname:?}" \
                --flavor  "${flavorid:?}" \
                --node-count 8 \
                --master-count 2 \
                --master-flavor "${flavorid:?}" \
                --cluster-template "${templateuuid:?}" \
                "${clustername:?}"

--START--
Request to create cluster ef984f7a-cb7c-4ad7-b297-cd09cd21fbe5 accepted

real	0m6.409s
user	0m0.942s
sys	0m0.112s
--END--

--START--
--END--

# -----------------------------------------------------
# List our clusters.
#[user@openstacker]

    mkdir "${HOME}/bin"
    cat > "${HOME}/bin/list.sh" << EOF
#!/bin/sh
echo "---- ----"
date
time \
    openstack \
        --os-cloud "${cloudname:?}" \
        coe cluster list
EOF

    chmod u+x "${HOME}/bin/list.sh"

    rm -f /tmp/list.log
    while :
    do
        "${HOME}/bin/list.sh" | tee -a /tmp/list.log
        sleep 5
    done


--START--
Tue Dec 31 15:31:26 UTC 2019
+--------------------------------------+----------+------------------+------------+--------------+--------------------+
| uuid                                 | name     | keypair          | node_count | master_count | status             |
+--------------------------------------+----------+------------------+------------+--------------+--------------------+
| 17ae1d21-9810-443d-a14d-e33584a4d123 | Augustus | zrq-gaia-keypair |          4 |            2 | CREATE_FAILED      |
| ef984f7a-cb7c-4ad7-b297-cd09cd21fbe5 | Augustus | zrq-gaia-keypair |          8 |            2 | CREATE_IN_PROGRESS |
+--------------------------------------+----------+------------------+------------+--------------+--------------------+
--END--

--START--
real	0m5.758s
user	0m1.038s
sys	0m0.098s
--END--

    ....
    ....


--START--
Tue Dec 31 15:42:17 UTC 2019
+--------------------------------------+----------+------------------+------------+--------------+--------------------+
| uuid                                 | name     | keypair          | node_count | master_count | status             |
+--------------------------------------+----------+------------------+------------+--------------+--------------------+
| 17ae1d21-9810-443d-a14d-e33584a4d123 | Augustus | zrq-gaia-keypair |          4 |            2 | CREATE_FAILED      |
| ef984f7a-cb7c-4ad7-b297-cd09cd21fbe5 | Augustus | zrq-gaia-keypair |          8 |            2 | CREATE_IN_PROGRESS |
+--------------------------------------+----------+------------------+------------+--------------+--------------------+
--END--

--START--
real	0m5.742s
user	0m0.988s
sys	0m0.093s
--END--

    ....
    ....

--START--
Tue Dec 31 15:42:28 UTC 2019
+--------------------------------------+----------+------------------+------------+--------------+-----------------+
| uuid                                 | name     | keypair          | node_count | master_count | status          |
+--------------------------------------+----------+------------------+------------+--------------+-----------------+
| 17ae1d21-9810-443d-a14d-e33584a4d123 | Augustus | zrq-gaia-keypair |          4 |            2 | CREATE_FAILED   |
| ef984f7a-cb7c-4ad7-b297-cd09cd21fbe5 | Augustus | zrq-gaia-keypair |          8 |            2 | CREATE_COMPLETE |
+--------------------------------------+----------+------------------+------------+--------------+-----------------+
--END--

--START--
real	0m6.007s
user	0m1.024s
sys	0m0.099s
--END--

# -----------------------------------------------------
# Get the details of our OpenStack cluster.
#[user@openstacker]

    clusteruuid=$(
        openstack \
            --os-cloud "${cloudname:?}" \
            coe cluster list \
                --format json \
        | jq -r '.[1] | .uuid'
        )

    echo "Cluster uuid [${clusteruuid}]"

--START--
Cluster uuid [ef984f7a-cb7c-4ad7-b297-cd09cd21fbe5]
--END--

    time \
        openstack \
            --os-cloud "${cloudname:?}" \
            coe cluster show \
                "${clusteruuid}"

--OSTART--
+---------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Field               | Value                                                                                                                                                                                                                                                                                                                                                                                                  |
+---------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| status              | CREATE_COMPLETE                                                                                                                                                                                                                                                                                                                                                                                        |
| cluster_template_id | 41437926-8461-4fdf-ac1b-ff97325a79f8                                                                                                                                                                                                                                                                                                                                                                   |
| node_addresses      | ['10.0.0.11', '10.0.0.8', '10.0.0.4', '10.0.0.14', '10.0.0.29', '10.0.0.16', '10.0.0.7', '10.0.0.33']                                                                                                                                                                                                                                                                                                  |
| uuid                | ef984f7a-cb7c-4ad7-b297-cd09cd21fbe5                                                                                                                                                                                                                                                                                                                                                                   |
| stack_id            | 6f9678a1-bb4f-41bf-926d-b3a0052b1fa2                                                                                                                                                                                                                                                                                                                                                                   |
| status_reason       | None                                                                                                                                                                                                                                                                                                                                                                                                   |
| created_at          | 2019-12-31T15:31:10+00:00                                                                                                                                                                                                                                                                                                                                                                              |
| updated_at          | 2019-12-31T15:42:39+00:00                                                                                                                                                                                                                                                                                                                                                                              |
| coe_version         | v1.14.6                                                                                                                                                                                                                                                                                                                                                                                                |
| labels              | {'tiller_enabled': 'true', 'kube_tag': 'v1.14.6', 'max_node_count': '5', 'cloud_provider_tag': 'v1.14.0', 'tiller_tag': 'v2.14.3', 'monitoring_enabled': 'true', 'cgroup_driver': 'cgroupfs', 'min_node_count': '1', 'master_lb_floating_ip_enabled': 'true', 'ingress_controller': 'octavia', 'heat_container_agent_tag': 'train-stable-1', 'autoscaler_tag': 'v1.0', 'auto_scaling_enabled': 'true'} |
| faults              |                                                                                                                                                                                                                                                                                                                                                                                                        |
| keypair             | zrq-gaia-keypair                                                                                                                                                                                                                                                                                                                                                                                       |
| api_address         | https://128.232.227.144:6443                                                                                                                                                                                                                                                                                                                                                                           |
| master_addresses    | ['10.0.0.5', '10.0.0.19']                                                                                                                                                                                                                                                                                                                                                                              |
| create_timeout      | 60                                                                                                                                                                                                                                                                                                                                                                                                     |
| node_count          | 8                                                                                                                                                                                                                                                                                                                                                                                                      |
| discovery_url       | https://discovery.etcd.io/e41f3ad8b1d2fb2edd4cb9af73482102                                                                                                                                                                                                                                                                                                                                             |
| master_count        | 2                                                                                                                                                                                                                                                                                                                                                                                                      |
| container_version   | 1.12.6                                                                                                                                                                                                                                                                                                                                                                                                 |
| name                | Augustus                                                                                                                                                                                                                                                                                                                                                                                               |
| master_flavor_id    | 20061eba-9e88-494c-95a3-41ed77721244                                                                                                                                                                                                                                                                                                                                                                   |
| flavor_id           | 20061eba-9e88-494c-95a3-41ed77721244                                                                                                                                                                                                                                                                                                                                                                   |
+---------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
--END--

--START--
real	0m4.850s
user	0m0.977s
sys	0m0.092s
--END--


    time \
        openstack \
            --os-cloud "${cloudname:?}" \
            coe cluster show \
                --format json \
                "${clusteruuid}" \
        | jq '.labels'

--START--
{
  "tiller_enabled": "true",
  "kube_tag": "v1.14.6",
  "max_node_count": "5",
  "cloud_provider_tag": "v1.14.0",
  "tiller_tag": "v2.14.3",
  "monitoring_enabled": "true",
  "cgroup_driver": "cgroupfs",
  "min_node_count": "1",
  "master_lb_floating_ip_enabled": "true",
  "ingress_controller": "octavia",
  "heat_container_agent_tag": "train-stable-1",
  "autoscaler_tag": "v1.0",
  "auto_scaling_enabled": "true"
}
--END--

--START--
real	0m4.703s
user	0m0.987s
sys	0m0.112s
--END--


    time \
        openstack \
            --os-cloud "${cloudname:?}" \
            coe cluster show \
                --format json \
                "${clusteruuid}" \
        | jq '.node_addresses'

--START--
[
  "10.0.0.11",
  "10.0.0.8",
  "10.0.0.4",
  "10.0.0.14",
  "10.0.0.29",
  "10.0.0.16",
  "10.0.0.7",
  "10.0.0.33"
]
--END--

--START--
real	0m4.863s
user	0m0.996s
sys	0m0.103s
--END--


# -----------------------------------------------------
# List our clusters.
#[user@openstacker]

    time \
        openstack \
            --os-cloud "${cloudname:?}" \
            coe cluster list

--START--
+--------------------------------------+----------+------------------+------------+--------------+-----------------+
| uuid                                 | name     | keypair          | node_count | master_count | status          |
+--------------------------------------+----------+------------------+------------+--------------+-----------------+
| 17ae1d21-9810-443d-a14d-e33584a4d123 | Augustus | zrq-gaia-keypair |          4 |            2 | CREATE_FAILED   |
| ef984f7a-cb7c-4ad7-b297-cd09cd21fbe5 | Augustus | zrq-gaia-keypair |          6 |            2 | UPDATE_COMPLETE |
+--------------------------------------+----------+------------------+------------+--------------+-----------------+
--END--

--START--
real	0m5.614s
user	0m0.969s
sys	0m0.099s
--END--


# -----------------------------------------------------
# Delete our failed cluster.
#[user@openstacker]

    for clusterid in $(
        openstack \
            --os-cloud "${cloudname:?}" \
            coe cluster list \
                --format json \
            | jq -r '.[] | select(.status == "CREATE_FAILED") | .uuid'
        )
    do
        echo "Cluster [${clusterid:?}]"
        openstack \
            --os-cloud "${cloudname:?}" \
            coe cluster delete \
                "${clusterid:?}"
    done

--START--
Cluster [17ae1d21-9810-443d-a14d-e33584a4d123]
Request to delete cluster 17ae1d21-9810-443d-a14d-e33584a4d123 has been accepted.
--END--



# -----------------------------------------------------
# List our clusters.
#[user@openstacker]

    time \
        openstack \
            --os-cloud "${cloudname:?}" \
            coe cluster list

--START--
+--------------------------------------+----------+------------------+------------+--------------+-----------------+
| uuid                                 | name     | keypair          | node_count | master_count | status          |
+--------------------------------------+----------+------------------+------------+--------------+-----------------+
| ef984f7a-cb7c-4ad7-b297-cd09cd21fbe5 | Augustus | zrq-gaia-keypair |          6 |            2 | UPDATE_COMPLETE |
+--------------------------------------+----------+------------------+------------+--------------+-----------------+
--END--

--START--
real	0m4.811s
user	0m0.969s
sys	0m0.094s
--END--


# -----------------------------------------------------
# List our servers.
#[user@openstacker]

    time \
        openstack \
            --os-cloud "${cloudname:?}" \
            server list

--START--
+--------------------------------------+--------------------------------+--------+-------------------+-------------------------+------------------+
| ID                                   | Name                           | Status | Networks          | Image                   | Flavor           |
+--------------------------------------+--------------------------------+--------+-------------------+-------------------------+------------------+
| 04e61f49-2a91-49a0-b2b3-2afe7f48c492 | augustus-vwab7fqj6ofy-node-4   | ACTIVE | private=10.0.0.29 | FedoraAtomic29-20191028 | general.v1.small |
| c318fcc4-111d-45d8-9083-ef8d283eac4c | augustus-vwab7fqj6ofy-node-3   | ACTIVE | private=10.0.0.14 | FedoraAtomic29-20191028 | general.v1.small |
| 98686fd0-62ff-41c8-9323-5705e4f63f0a | augustus-vwab7fqj6ofy-node-6   | ACTIVE | private=10.0.0.7  | FedoraAtomic29-20191028 | general.v1.small |
| b73e8eef-99ef-417e-9fb3-2d5846eac4b0 | augustus-vwab7fqj6ofy-node-5   | ACTIVE | private=10.0.0.16 | FedoraAtomic29-20191028 | general.v1.small |
| f377d7fa-cc9e-455b-b2ac-acd01ce72e8f | augustus-vwab7fqj6ofy-node-2   | ACTIVE | private=10.0.0.4  | FedoraAtomic29-20191028 | general.v1.small |
| 72b5990b-a948-4f35-8deb-e22d01253100 | augustus-vwab7fqj6ofy-node-1   | ACTIVE | private=10.0.0.8  | FedoraAtomic29-20191028 | general.v1.small |
| 2d0531e8-7fc3-43a9-8eb8-10769555c184 | augustus-vwab7fqj6ofy-master-0 | ACTIVE | private=10.0.0.5  | FedoraAtomic29-20191028 | general.v1.small |
| 4b76c139-ed48-4ba9-8d5c-c537842f702d | augustus-vwab7fqj6ofy-master-1 | ACTIVE | private=10.0.0.19 | FedoraAtomic29-20191028 | general.v1.small |
+--------------------------------------+--------------------------------+--------+-------------------+-------------------------+------------------+
--END--

--START--
real	0m3.267s
user	0m1.109s
sys	0m0.122s
--END--


# -----------------------------------------------------
# List our volumes.
#[user@openstacker]

    time \
        openstack \
            --os-cloud "${cloudname:?}" \
            volume list

--START--
-
--END--

--START--
real	0m2.849s
user	0m1.051s
sys	0m0.104s
--END--


# -----------------------------------------------------
# List our networks.
#[user@openstacker]

    time \
        openstack \
            --os-cloud "${cloudname:?}" \
            network list

--START--
+--------------------------------------+------------------+----------------------------------------------------------------------------+
| ID                                   | Name             | Subnets                                                                    |
+--------------------------------------+------------------+----------------------------------------------------------------------------+
| a929e8db-1bf4-4a5f-a80c-fabd39d06a26 | internet         | 180dc961-c52f-461a-b241-8f7a30d022a5, 273123bb-70f6-4f51-a406-7fc4b446532d |
| ecb791d5-1022-447a-a79c-8f38a0f5c990 | cumulus-internal | 01b76c7c-3c1a-4c5c-9a5a-14bcf6c0c290                                       |
| fda87b57-03c4-405c-a171-a7bb45dd1e0c | private          | f2a7cedb-e108-4c00-b809-f3fedae78e93                                       |
+--------------------------------------+------------------+----------------------------------------------------------------------------+
--END--

--START--
real	0m2.409s
user	0m0.937s
sys	0m0.092s
--END--


# -----------------------------------------------------
# List our subnets.
#[user@openstacker]

    time \
        openstack \
            --os-cloud "${cloudname:?}" \
            subnet list

--START--
+--------------------------------------+------------------------------------------------------------------------+--------------------------------------+---------------+
| ID                                   | Name                                                                   | Network                              | Subnet        |
+--------------------------------------+------------------------------------------------------------------------+--------------------------------------+---------------+
| 01b76c7c-3c1a-4c5c-9a5a-14bcf6c0c290 | cumulus-internal                                                       | ecb791d5-1022-447a-a79c-8f38a0f5c990 | 10.218.0.0/16 |
| f2a7cedb-e108-4c00-b809-f3fedae78e93 | augustus-vwab7fqj6ofy-network-53z3nehmqag3-private_subnet-em4sgidcd4ea | fda87b57-03c4-405c-a171-a7bb45dd1e0c | 10.0.0.0/24   |
+--------------------------------------+------------------------------------------------------------------------+--------------------------------------+---------------+
--END--

--START--
real	0m2.322s
user	0m0.935s
sys	0m0.092s
--END--


# -----------------------------------------------------
# List our routers.
#[user@openstacker]

    time \
        openstack \
            --os-cloud "${cloudname:?}" \
            router list

--START--
+--------------------------------------+-------------------------------------------------------------------+--------+-------+----------------------------------+
| ID                                   | Name                                                              | Status | State | Project                          |
+--------------------------------------+-------------------------------------------------------------------+--------+-------+----------------------------------+
| eb10c574-78f7-4b9a-8f1f-9c886b691e8e | augustus-vwab7fqj6ofy-network-53z3nehmqag3-extrouter-ax72kykikqud | ACTIVE | UP    | 21b4ae3a2ea44bc5a9c14005ed2963af |
+--------------------------------------+-------------------------------------------------------------------+--------+-------+----------------------------------+
--END--

--START--
real	0m2.772s
user	0m0.939s
sys	0m0.086s
--END--


# -----------------------------------------------------
# List our security groups.
#[user@openstacker]

    time \
        openstack \
            --os-cloud "${cloudname:?}" \
            security group list

--START--
+--------------------------------------+---------------------------------------------------------+------------------------+----------------------------------+------+
| ID                                   | Name                                                    | Description            | Project                          | Tags |
+--------------------------------------+---------------------------------------------------------+------------------------+----------------------------------+------+
| 2394f925-a834-4689-8c99-15cb180ec08a | augustus-vwab7fqj6ofy-secgroup_kube_master-mhucjqbahouf |                        | 21b4ae3a2ea44bc5a9c14005ed2963af | []   |
| aa63efff-7c67-4f29-ba7c-a1d85695407b | default                                                 | Default security group | 21b4ae3a2ea44bc5a9c14005ed2963af | []   |
| f6643d1d-ec5a-4153-8435-40f9d4e9caee | augustus-vwab7fqj6ofy-secgroup_kube_minion-j2oufid2v43f |                        | 21b4ae3a2ea44bc5a9c14005ed2963af | []   |
+--------------------------------------+---------------------------------------------------------+------------------------+----------------------------------+------+
--END--

--START--
real	0m2.333s
user	0m0.937s
sys	0m0.086s
--END--


# -----------------------------------------------------
# List our stacks.
#[user@openstacker]

    time \
        openstack \
            --os-cloud "${cloudname:?}" \
            stack list

--START--
+--------------------------------------+-----------------------+-----------------+----------------------+----------------------+
| ID                                   | Stack Name            | Stack Status    | Creation Time        | Updated Time         |
+--------------------------------------+-----------------------+-----------------+----------------------+----------------------+
| 6f9678a1-bb4f-41bf-926d-b3a0052b1fa2 | augustus-vwab7fqj6ofy | UPDATE_COMPLETE | 2019-12-31T15:31:17Z | 2019-12-31T15:54:45Z |
+--------------------------------------+-----------------------+-----------------+----------------------+----------------------+
--END--

--START--
real	0m2.293s
user	0m0.951s
sys	0m0.079s
--END--


# -----------------------------------------------------
# Get our stack details.
#[user@openstacker]

    stackid=$(
        openstack \
            --os-cloud "${cloudname:?}" \
            stack list \
                --format json \
        | jq -r '.[0] | .ID'
        )

    echo "Stack [${stackid:?}]"

--START--
Stack [6f9678a1-bb4f-41bf-926d-b3a0052b1fa2]
--END--


    time \
        openstack \
            --os-cloud "${cloudname:?}" \
            stack show \
                "${stackid}"

--START--
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Field                 | Value                                                                                                                                                                                                                                                                                                                                                                                                        |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| id                    | 6f9678a1-bb4f-41bf-926d-b3a0052b1fa2                                                                                                                                                                                                                                                                                                                                                                         |
| stack_name            | augustus-vwab7fqj6ofy                                                                                                                                                                                                                                                                                                                                                                                        |
| description           | This template will boot a Kubernetes cluster with one or more minions (as specified by the number_of_minions parameter, which defaults to 1).                                                                                                                                                                                                                                                                |
|                       |                                                                                                                                                                                                                                                                                                                                                                                                              |
| creation_time         | 2019-12-31T15:31:17Z                                                                                                                                                                                                                                                                                                                                                                                         |
| updated_time          | 2019-12-31T15:54:45Z                                                                                                                                                                                                                                                                                                                                                                                         |
| stack_status          | UPDATE_COMPLETE                                                                                                                                                                                                                                                                                                                                                                                              |
| stack_status_reason   | Stack UPDATE completed successfully                                                                                                                                                                                                                                                                                                                                                                          |
| parameters            | OS::project_id: 21b4ae3a2ea44bc5a9c14005ed2963af                                                                                                                                                                                                                                                                                                                                                             |
|                       | OS::stack_id: 6f9678a1-bb4f-41bf-926d-b3a0052b1fa2                                                                                                                                                                                                                                                                                                                                                           |
|                       | OS::stack_name: augustus-vwab7fqj6ofy                                                                                                                                                                                                                                                                                                                                                                        |
|                       | admission_control_list: NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,DefaultTolerationSeconds,MutatingAdmissionWebhook,ValidatingAdmissionWebhook,ResourceQuota                                                                                                                                                                                                                         |
|                       | auth_url: https://cumulus.openstack.hpc.cam.ac.uk:5000/v3                                                                                                                                                                                                                                                                                                                                                    |
|                       | auto_healing_controller: draino                                                                                                                                                                                                                                                                                                                                                                              |
|                       | auto_healing_enabled: 'False'                                                                                                                                                                                                                                                                                                                                                                                |
|                       | auto_scaling_enabled: 'True'                                                                                                                                                                                                                                                                                                                                                                                 |
|                       | autoscaler_tag: v1.0                                                                                                                                                                                                                                                                                                                                                                                         |
|                       | availability_zone: ''                                                                                                                                                                                                                                                                                                                                                                                        |
|                       | boot_volume_size: '0'                                                                                                                                                                                                                                                                                                                                                                                        |
|                       | boot_volume_type: rbd                                                                                                                                                                                                                                                                                                                                                                                        |
|                       | ca_key: '******'                                                                                                                                                                                                                                                                                                                                                                                             |
|                       | calico_ipv4pool: 192.168.0.0/16                                                                                                                                                                                                                                                                                                                                                                              |
|                       | calico_kube_controllers_tag: v1.0.3                                                                                                                                                                                                                                                                                                                                                                          |
|                       | calico_tag: v3.3.6                                                                                                                                                                                                                                                                                                                                                                                           |
|                       | cert_manager_api: 'False'                                                                                                                                                                                                                                                                                                                                                                                    |
|                       | cgroup_driver: cgroupfs                                                                                                                                                                                                                                                                                                                                                                                      |
|                       | cloud_provider_enabled: 'True'                                                                                                                                                                                                                                                                                                                                                                               |
|                       | cloud_provider_tag: v1.14.0                                                                                                                                                                                                                                                                                                                                                                                  |
|                       | cluster_uuid: ef984f7a-cb7c-4ad7-b297-cd09cd21fbe5                                                                                                                                                                                                                                                                                                                                                           |
|                       | container_infra_prefix: ''                                                                                                                                                                                                                                                                                                                                                                                   |
|                       | coredns_tag: 1.3.1                                                                                                                                                                                                                                                                                                                                                                                           |
|                       | discovery_url: https://discovery.etcd.io/e41f3ad8b1d2fb2edd4cb9af73482102                                                                                                                                                                                                                                                                                                                                    |
|                       | dns_cluster_domain: cluster.local                                                                                                                                                                                                                                                                                                                                                                            |
|                       | dns_nameserver: 8.8.8.8                                                                                                                                                                                                                                                                                                                                                                                      |
|                       | dns_service_ip: 10.254.0.10                                                                                                                                                                                                                                                                                                                                                                                  |
|                       | docker_storage_driver: overlay2                                                                                                                                                                                                                                                                                                                                                                              |
|                       | docker_volume_size: '0'                                                                                                                                                                                                                                                                                                                                                                                      |
|                       | docker_volume_type: rbd                                                                                                                                                                                                                                                                                                                                                                                      |
|                       | draino_tag: abf028a                                                                                                                                                                                                                                                                                                                                                                                          |
|                       | etcd_tag: v3.2.7                                                                                                                                                                                                                                                                                                                                                                                             |
|                       | etcd_volume_size: '0'                                                                                                                                                                                                                                                                                                                                                                                        |
|                       | etcd_volume_type: rbd                                                                                                                                                                                                                                                                                                                                                                                        |
|                       | existing_master_private_ip: ''                                                                                                                                                                                                                                                                                                                                                                               |
|                       | existing_security_group: ''                                                                                                                                                                                                                                                                                                                                                                                  |
|                       | external_network: a929e8db-1bf4-4a5f-a80c-fabd39d06a26                                                                                                                                                                                                                                                                                                                                                       |
|                       | fixed_network: ''                                                                                                                                                                                                                                                                                                                                                                                            |
|                       | fixed_network_cidr: 10.0.0.0/24                                                                                                                                                                                                                                                                                                                                                                              |
|                       | fixed_network_name: private                                                                                                                                                                                                                                                                                                                                                                                  |
|                       | fixed_subnet: ''                                                                                                                                                                                                                                                                                                                                                                                             |
|                       | flannel_backend: vxlan                                                                                                                                                                                                                                                                                                                                                                                       |
|                       | flannel_cni_tag: v0.3.0                                                                                                                                                                                                                                                                                                                                                                                      |
|                       | flannel_network_cidr: 10.100.0.0/16                                                                                                                                                                                                                                                                                                                                                                          |
|                       | flannel_network_subnetlen: '24'                                                                                                                                                                                                                                                                                                                                                                              |
|                       | flannel_tag: v0.11.0-amd64                                                                                                                                                                                                                                                                                                                                                                                   |
|                       | grafana_admin_passwd: '******'                                                                                                                                                                                                                                                                                                                                                                               |
|                       | grafana_tag: 5.1.5                                                                                                                                                                                                                                                                                                                                                                                           |
|                       | heat_container_agent_tag: train-stable-1                                                                                                                                                                                                                                                                                                                                                                     |
|                       | http_proxy: ''                                                                                                                                                                                                                                                                                                                                                                                               |
|                       | https_proxy: ''                                                                                                                                                                                                                                                                                                                                                                                              |
|                       | influx_grafana_dashboard_enabled: 'False'                                                                                                                                                                                                                                                                                                                                                                    |
|                       | ingress_controller: octavia                                                                                                                                                                                                                                                                                                                                                                                  |
|                       | ingress_controller_role: ingress                                                                                                                                                                                                                                                                                                                                                                             |
|                       | insecure_registry_url: ''                                                                                                                                                                                                                                                                                                                                                                                    |
|                       | is_cluster_stack: 'True'                                                                                                                                                                                                                                                                                                                                                                                     |
|                       | k8s_keystone_auth_tag: v1.14.0                                                                                                                                                                                                                                                                                                                                                                               |
|                       | keystone_auth_default_policy: '[{"match": [{"type": "role", "values": ["member"]},                                                                                                                                                                                                                                                                                                                           |
|                       |   {"type": "project", "values": ["21b4ae3a2ea44bc5a9c14005ed2963af"]}], "resource":                                                                                                                                                                                                                                                                                                                          |
|                       |   {"namespace": "default", "resources": ["pods", "services", "deployments", "pvc"],                                                                                                                                                                                                                                                                                                                          |
|                       |   "verbs": ["list"], "version": "*"}}]'                                                                                                                                                                                                                                                                                                                                                                      |
|                       | keystone_auth_enabled: 'True'                                                                                                                                                                                                                                                                                                                                                                                |
|                       | kube_allow_priv: 'true'                                                                                                                                                                                                                                                                                                                                                                                      |
|                       | kube_dashboard_enabled: 'True'                                                                                                                                                                                                                                                                                                                                                                               |
|                       | kube_dashboard_version: v1.8.3                                                                                                                                                                                                                                                                                                                                                                               |
|                       | kube_service_account_key: '******'                                                                                                                                                                                                                                                                                                                                                                           |
|                       | kube_service_account_private_key: '******'                                                                                                                                                                                                                                                                                                                                                                   |
|                       | kube_tag: v1.14.6                                                                                                                                                                                                                                                                                                                                                                                            |
|                       | kube_version: v1.14.6                                                                                                                                                                                                                                                                                                                                                                                        |
|                       | kubeapi_options: ''                                                                                                                                                                                                                                                                                                                                                                                          |
|                       | kubecontroller_options: ''                                                                                                                                                                                                                                                                                                                                                                                   |
|                       | kubelet_options: ''                                                                                                                                                                                                                                                                                                                                                                                          |
|                       | kubeproxy_options: ''                                                                                                                                                                                                                                                                                                                                                                                        |
|                       | kubernetes_port: '6443'                                                                                                                                                                                                                                                                                                                                                                                      |
|                       | kubescheduler_options: ''                                                                                                                                                                                                                                                                                                                                                                                    |
|                       | loadbalancing_protocol: TCP                                                                                                                                                                                                                                                                                                                                                                                  |
|                       | magnum_auto_healer_tag: v1.15.0                                                                                                                                                                                                                                                                                                                                                                              |
|                       | magnum_url: https://cumulus.openstack.hpc.cam.ac.uk:9511/v1                                                                                                                                                                                                                                                                                                                                                  |
|                       | master_flavor: 20061eba-9e88-494c-95a3-41ed77721244                                                                                                                                                                                                                                                                                                                                                          |
|                       | master_image: FedoraAtomic29-20191028                                                                                                                                                                                                                                                                                                                                                                        |
|                       | master_kube_tag: v1.14.6                                                                                                                                                                                                                                                                                                                                                                                     |
|                       | master_nodegroup_name: default-master                                                                                                                                                                                                                                                                                                                                                                        |
|                       | master_role: master                                                                                                                                                                                                                                                                                                                                                                                          |
|                       | max_node_count: '5'                                                                                                                                                                                                                                                                                                                                                                                          |
|                       | min_node_count: '1'                                                                                                                                                                                                                                                                                                                                                                                          |
|                       | minion_flavor: 20061eba-9e88-494c-95a3-41ed77721244                                                                                                                                                                                                                                                                                                                                                          |
|                       | minion_image: FedoraAtomic29-20191028                                                                                                                                                                                                                                                                                                                                                                        |
|                       | minion_kube_tag: v1.14.6                                                                                                                                                                                                                                                                                                                                                                                     |
|                       | minions_to_remove: 7,0                                                                                                                                                                                                                                                                                                                                                                                       |
|                       | monitoring_enabled: 'True'                                                                                                                                                                                                                                                                                                                                                                                   |
|                       | network_driver: flannel                                                                                                                                                                                                                                                                                                                                                                                      |
|                       | nginx_ingress_controller_tag: 0.23.0                                                                                                                                                                                                                                                                                                                                                                         |
|                       | no_proxy: ''                                                                                                                                                                                                                                                                                                                                                                                                 |
|                       | node_problem_detector_tag: v0.6.2                                                                                                                                                                                                                                                                                                                                                                            |
|                       | nodes_affinity_policy: soft-anti-affinity                                                                                                                                                                                                                                                                                                                                                                    |
|                       | npd_enabled: 'True'                                                                                                                                                                                                                                                                                                                                                                                          |
|                       | number_of_masters: '2'                                                                                                                                                                                                                                                                                                                                                                                       |
|                       | number_of_minions: '6'                                                                                                                                                                                                                                                                                                                                                                                       |
|                       | octavia_enabled: 'True'                                                                                                                                                                                                                                                                                                                                                                                      |
|                       | octavia_ingress_controller_tag: v1.15.0                                                                                                                                                                                                                                                                                                                                                                      |
|                       | openstack_ca: '******'                                                                                                                                                                                                                                                                                                                                                                                       |
|                       | ostree_commit: ''                                                                                                                                                                                                                                                                                                                                                                                            |
|                       | ostree_remote: ''                                                                                                                                                                                                                                                                                                                                                                                            |
|                       | password: '******'                                                                                                                                                                                                                                                                                                                                                                                           |
|                       | pods_network_cidr: 10.100.0.0/16                                                                                                                                                                                                                                                                                                                                                                             |
|                       | portal_network_cidr: 10.254.0.0/16                                                                                                                                                                                                                                                                                                                                                                           |
|                       | project_id: 21b4ae3a2ea44bc5a9c14005ed2963af                                                                                                                                                                                                                                                                                                                                                                 |
|                       | prometheus_monitoring: 'False'                                                                                                                                                                                                                                                                                                                                                                               |
|                       | prometheus_operator_chart_tag: 5.12.3                                                                                                                                                                                                                                                                                                                                                                        |
|                       | prometheus_tag: v1.8.2                                                                                                                                                                                                                                                                                                                                                                                       |
|                       | region_name: RegionOne                                                                                                                                                                                                                                                                                                                                                                                       |
|                       | registry_chunksize: '5242880'                                                                                                                                                                                                                                                                                                                                                                                |
|                       | registry_container: container                                                                                                                                                                                                                                                                                                                                                                                |
|                       | registry_enabled: 'False'                                                                                                                                                                                                                                                                                                                                                                                    |
|                       | registry_insecure: 'True'                                                                                                                                                                                                                                                                                                                                                                                    |
|                       | registry_port: '5000'                                                                                                                                                                                                                                                                                                                                                                                        |
|                       | ssh_key_name: zrq-gaia-keypair                                                                                                                                                                                                                                                                                                                                                                               |
|                       | ssh_public_key: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDf4c9GuWKfTjclpDp779deRXXSgTblrTD6mdgJxwWOC2Vh1Tvicn8qv1tgTV62G49/783lffTKnCTUIFNOCTaaaLpkGDjVdR7ZG0o4u8r7c9bHEPaH/RJirG19wZ1LbTAA0XKGQrhlnCAMG2ruoX8zFz4FUNgpY0qkSLtNaarmFqkNxbg76sXehwzxhOqxLSoimlj4HJ0MUVVJsDUqbIpujJeC6AKKOUmr++h4Y/EnKetUSp/GhfHUD+Lt9BYALOFEyAAv3qyUqSrWT/JeFF//VS+syzoszBqBgQ+tvi4GBDhwnfRM0WgOOusWHXEOhitYwwaQ/6J66RC1zV4ksPOL |
|                       |   Cambridge HPC OpenStack                                                                                                                                                                                                                                                                                                                                                                                    |
|                       | swift_region: ''                                                                                                                                                                                                                                                                                                                                                                                             |
|                       | system_pods_initial_delay: '30'                                                                                                                                                                                                                                                                                                                                                                              |
|                       | system_pods_timeout: '5'                                                                                                                                                                                                                                                                                                                                                                                     |
|                       | tiller_enabled: 'True'                                                                                                                                                                                                                                                                                                                                                                                       |
|                       | tiller_namespace: magnum-tiller                                                                                                                                                                                                                                                                                                                                                                              |
|                       | tiller_tag: v2.14.3                                                                                                                                                                                                                                                                                                                                                                                          |
|                       | tls_disabled: 'False'                                                                                                                                                                                                                                                                                                                                                                                        |
|                       | traefik_ingress_controller_tag: v1.7.10                                                                                                                                                                                                                                                                                                                                                                      |
|                       | trust_id: '******'                                                                                                                                                                                                                                                                                                                                                                                           |
|                       | trustee_domain_id: e91836bb5a7042cbaa96c16f43cffd4b                                                                                                                                                                                                                                                                                                                                                          |
|                       | trustee_password: '******'                                                                                                                                                                                                                                                                                                                                                                                   |
|                       | trustee_user_id: ef2cb1db2127439e969db6392c760262                                                                                                                                                                                                                                                                                                                                                            |
|                       | trustee_username: ef984f7a-cb7c-4ad7-b297-cd09cd21fbe5_21b4ae3a2ea44bc5a9c14005ed2963af                                                                                                                                                                                                                                                                                                                      |
|                       | update_max_batch_size: '1'                                                                                                                                                                                                                                                                                                                                                                                   |
|                       | use_podman: 'False'                                                                                                                                                                                                                                                                                                                                                                                          |
|                       | username: yrvafhom@gmail.com                                                                                                                                                                                                                                                                                                                                                                                 |
|                       | verify_ca: 'True'                                                                                                                                                                                                                                                                                                                                                                                            |
|                       | volume_driver: ''                                                                                                                                                                                                                                                                                                                                                                                            |
|                       | wait_condition_timeout: '6000'                                                                                                                                                                                                                                                                                                                                                                               |
|                       | worker_nodegroup_name: default-worker                                                                                                                                                                                                                                                                                                                                                                        |
|                       | worker_role: worker                                                                                                                                                                                                                                                                                                                                                                                          |
|                       |                                                                                                                                                                                                                                                                                                                                                                                                              |
| outputs               | - description: 'This is a list of the "private" IP addresses of all the Kubernetes                                                                                                                                                                                                                                                                                                                           |
|                       |     masters.                                                                                                                                                                                                                                                                                                                                                                                                 |
|                       |                                                                                                                                                                                                                                                                                                                                                                                                              |
|                       |     '                                                                                                                                                                                                                                                                                                                                                                                                        |
|                       |   output_key: kube_masters_private                                                                                                                                                                                                                                                                                                                                                                           |
|                       |   output_value:                                                                                                                                                                                                                                                                                                                                                                                              |
|                       |   - 10.0.0.5                                                                                                                                                                                                                                                                                                                                                                                                 |
|                       |   - 10.0.0.19                                                                                                                                                                                                                                                                                                                                                                                                |
|                       | - description: 'This is a list of the "public" IP addresses of all the Kubernetes                                                                                                                                                                                                                                                                                                                            |
|                       |     masters. Use these IP addresses to log in to the Kubernetes masters via ssh.                                                                                                                                                                                                                                                                                                                             |
|                       |                                                                                                                                                                                                                                                                                                                                                                                                              |
|                       |     '                                                                                                                                                                                                                                                                                                                                                                                                        |
|                       |   output_key: kube_masters                                                                                                                                                                                                                                                                                                                                                                                   |
|                       |   output_value:                                                                                                                                                                                                                                                                                                                                                                                              |
|                       |   - null                                                                                                                                                                                                                                                                                                                                                                                                     |
|                       |   - null                                                                                                                                                                                                                                                                                                                                                                                                     |
|                       | - description: 'This is the API endpoint of the Kubernetes cluster. Use this to access                                                                                                                                                                                                                                                                                                                       |
|                       |     the Kubernetes API.                                                                                                                                                                                                                                                                                                                                                                                      |
|                       |                                                                                                                                                                                                                                                                                                                                                                                                              |
|                       |     '                                                                                                                                                                                                                                                                                                                                                                                                        |
|                       |   output_key: api_address                                                                                                                                                                                                                                                                                                                                                                                    |
|                       |   output_value: 128.232.227.144                                                                                                                                                                                                                                                                                                                                                                              |
|                       | - description: 'This is a list of the "private" IP addresses of all the Kubernetes                                                                                                                                                                                                                                                                                                                           |
|                       |     minions.                                                                                                                                                                                                                                                                                                                                                                                                 |
|                       |                                                                                                                                                                                                                                                                                                                                                                                                              |
|                       |     '                                                                                                                                                                                                                                                                                                                                                                                                        |
|                       |   output_key: kube_minions_private                                                                                                                                                                                                                                                                                                                                                                           |
|                       |   output_value:                                                                                                                                                                                                                                                                                                                                                                                              |
|                       |   - 10.0.0.8                                                                                                                                                                                                                                                                                                                                                                                                 |
|                       |   - 10.0.0.4                                                                                                                                                                                                                                                                                                                                                                                                 |
|                       |   - 10.0.0.14                                                                                                                                                                                                                                                                                                                                                                                                |
|                       |   - 10.0.0.29                                                                                                                                                                                                                                                                                                                                                                                                |
|                       |   - 10.0.0.16                                                                                                                                                                                                                                                                                                                                                                                                |
|                       |   - 10.0.0.7                                                                                                                                                                                                                                                                                                                                                                                                 |
|                       | - description: This is a list of the "public" IP addresses of all the Kubernetes minions.                                                                                                                                                                                                                                                                                                                    |
|                       |     Use these IP addresses to log in to the Kubernetes minions via ssh.                                                                                                                                                                                                                                                                                                                                      |
|                       |   output_key: kube_minions                                                                                                                                                                                                                                                                                                                                                                                   |
|                       |   output_value:                                                                                                                                                                                                                                                                                                                                                                                              |
|                       |   - null                                                                                                                                                                                                                                                                                                                                                                                                     |
|                       |   - null                                                                                                                                                                                                                                                                                                                                                                                                     |
|                       |   - null                                                                                                                                                                                                                                                                                                                                                                                                     |
|                       |   - null                                                                                                                                                                                                                                                                                                                                                                                                     |
|                       |   - null                                                                                                                                                                                                                                                                                                                                                                                                     |
|                       |   - null                                                                                                                                                                                                                                                                                                                                                                                                     |
|                       | - description: This is the url of docker registry server where you can store docker                                                                                                                                                                                                                                                                                                                          |
|                       |     images.                                                                                                                                                                                                                                                                                                                                                                                                  |
|                       |   output_key: registry_address                                                                                                                                                                                                                                                                                                                                                                               |
|                       |   output_value: localhost:5000                                                                                                                                                                                                                                                                                                                                                                               |
|                       |                                                                                                                                                                                                                                                                                                                                                                                                              |
| links                 | - href: https://cumulus.openstack.hpc.cam.ac.uk:8004/v1/21b4ae3a2ea44bc5a9c14005ed2963af/stacks/augustus-vwab7fqj6ofy/6f9678a1-bb4f-41bf-926d-b3a0052b1fa2                                                                                                                                                                                                                                                   |
|                       |   rel: self                                                                                                                                                                                                                                                                                                                                                                                                  |
|                       |                                                                                                                                                                                                                                                                                                                                                                                                              |
| parent                | None                                                                                                                                                                                                                                                                                                                                                                                                         |
| disable_rollback      | True                                                                                                                                                                                                                                                                                                                                                                                                         |
| deletion_time         | None                                                                                                                                                                                                                                                                                                                                                                                                         |
| stack_user_project_id | 40f9fea95e4e4eb68374380d447bd2b8                                                                                                                                                                                                                                                                                                                                                                             |
| capabilities          | []                                                                                                                                                                                                                                                                                                                                                                                                           |
| notification_topics   | []                                                                                                                                                                                                                                                                                                                                                                                                           |
| tags                  | None                                                                                                                                                                                                                                                                                                                                                                                                         |
| timeout_mins          | 60                                                                                                                                                                                                                                                                                                                                                                                                           |
| stack_owner           | None                                                                                                                                                                                                                                                                                                                                                                                                         |
+-----------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
--END--

--START--
real	0m2.465s
user	0m0.983s
sys	0m0.081s
--END--



    openstack \
        --os-cloud "${cloudname:?}" \
        stack show \
            "${stackid}" \
            --format json \
    | jq '.'

--START--
{
  "id": "6f9678a1-bb4f-41bf-926d-b3a0052b1fa2",
  "stack_name": "augustus-vwab7fqj6ofy",
  "description": "This template will boot a Kubernetes cluster with one or more minions (as specified by the number_of_minions parameter, which defaults to 1).\n",
  "creation_time": "2019-12-31T15:31:17Z",
  "updated_time": "2019-12-31T15:54:45Z",
  "stack_status": "UPDATE_COMPLETE",
  "stack_status_reason": "Stack UPDATE completed successfully",
  "parameters": {
    "magnum_url": "https://cumulus.openstack.hpc.cam.ac.uk:9511/v1",
    "keystone_auth_enabled": "True",
    "http_proxy": "",
    "cgroup_driver": "cgroupfs",
    "registry_container": "container",
    "kubernetes_port": "6443",
    "calico_kube_controllers_tag": "v1.0.3",
    "octavia_enabled": "True",
    "etcd_volume_size": "0",
    "kube_dashboard_enabled": "True",
    "master_flavor": "20061eba-9e88-494c-95a3-41ed77721244",
    "etcd_tag": "v3.2.7",
    "kube_version": "v1.14.6",
    "k8s_keystone_auth_tag": "v1.14.0",
    "kube_service_account_private_key": "******",
    "kube_tag": "v1.14.6",
    "existing_master_private_ip": "",
    "auto_scaling_enabled": "True",
    "cloud_provider_tag": "v1.14.0",
    "ca_key": "******",
    "tiller_enabled": "True",
    "registry_enabled": "False",
    "verify_ca": "True",
    "etcd_volume_type": "rbd",
    "password": "******",
    "worker_role": "worker",
    "dns_service_ip": "10.254.0.10",
    "update_max_batch_size": "1",
    "ssh_key_name": "zrq-gaia-keypair",
    "flannel_tag": "v0.11.0-amd64",
    "flannel_network_subnetlen": "24",
    "dns_nameserver": "8.8.8.8",
    "number_of_masters": "2",
    "wait_condition_timeout": "6000",
    "draino_tag": "abf028a",
    "auto_healing_controller": "draino",
    "portal_network_cidr": "10.254.0.0/16",
    "min_node_count": "1",
    "admission_control_list": "NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,DefaultTolerationSeconds,MutatingAdmissionWebhook,ValidatingAdmissionWebhook,ResourceQuota",
    "pods_network_cidr": "10.100.0.0/16",
    "ingress_controller": "octavia",
    "external_network": "a929e8db-1bf4-4a5f-a80c-fabd39d06a26",
    "docker_volume_type": "rbd",
    "trustee_domain_id": "e91836bb5a7042cbaa96c16f43cffd4b",
    "tls_disabled": "False",
    "fixed_subnet": "",
    "ssh_public_key": "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDf4c9GuWKfTjclpDp779deRXXSgTblrTD6mdgJxwWOC2Vh1Tvicn8qv1tgTV62G49/783lffTKnCTUIFNOCTaaaLpkGDjVdR7ZG0o4u8r7c9bHEPaH/RJirG19wZ1LbTAA0XKGQrhlnCAMG2ruoX8zFz4FUNgpY0qkSLtNaarmFqkNxbg76sXehwzxhOqxLSoimlj4HJ0MUVVJsDUqbIpujJeC6AKKOUmr++h4Y/EnKetUSp/GhfHUD+Lt9BYALOFEyAAv3qyUqSrWT/JeFF//VS+syzoszBqBgQ+tvi4GBDhwnfRM0WgOOusWHXEOhitYwwaQ/6J66RC1zV4ksPOL Cambridge HPC OpenStack",
    "boot_volume_size": "0",
    "swift_region": "",
    "influx_grafana_dashboard_enabled": "False",
    "keystone_auth_default_policy": "[{\"match\": [{\"type\": \"role\", \"values\": [\"member\"]}, {\"type\": \"project\", \"values\": [\"21b4ae3a2ea44bc5a9c14005ed2963af\"]}], \"resource\": {\"namespace\": \"default\", \"resources\": [\"pods\", \"services\", \"deployments\", \"pvc\"], \"verbs\": [\"list\"], \"version\": \"*\"}}]",
    "volume_driver": "",
    "kubescheduler_options": "",
    "use_podman": "False",
    "calico_tag": "v3.3.6",
    "loadbalancing_protocol": "TCP",
    "fixed_network_name": "private",
    "cloud_provider_enabled": "True",
    "OS::stack_id": "6f9678a1-bb4f-41bf-926d-b3a0052b1fa2",
    "flannel_cni_tag": "v0.3.0",
    "prometheus_monitoring": "False",
    "tiller_namespace": "magnum-tiller",
    "kubelet_options": "",
    "fixed_network": "",
    "minion_kube_tag": "v1.14.6",
    "trustee_username": "ef984f7a-cb7c-4ad7-b297-cd09cd21fbe5_21b4ae3a2ea44bc5a9c14005ed2963af",
    "availability_zone": "",
    "coredns_tag": "1.3.1",
    "prometheus_operator_chart_tag": "5.12.3",
    "cert_manager_api": "False",
    "minion_flavor": "20061eba-9e88-494c-95a3-41ed77721244",
    "magnum_auto_healer_tag": "v1.15.0",
    "kubeproxy_options": "",
    "master_nodegroup_name": "default-master",
    "cluster_uuid": "ef984f7a-cb7c-4ad7-b297-cd09cd21fbe5",
    "grafana_admin_passwd": "******",
    "flannel_backend": "vxlan",
    "registry_port": "5000",
    "autoscaler_tag": "v1.0",
    "master_image": "FedoraAtomic29-20191028",
    "nginx_ingress_controller_tag": "0.23.0",
    "https_proxy": "",
    "npd_enabled": "True",
    "existing_security_group": "",
    "username": "yrvafhom@gmail.com",
    "kube_service_account_key": "******",
    "region_name": "RegionOne",
    "ostree_remote": "",
    "grafana_tag": "5.1.5",
    "worker_nodegroup_name": "default-worker",
    "kube_allow_priv": "true",
    "node_problem_detector_tag": "v0.6.2",
    "minion_image": "FedoraAtomic29-20191028",
    "docker_storage_driver": "overlay2",
    "project_id": "21b4ae3a2ea44bc5a9c14005ed2963af",
    "registry_chunksize": "5242880",
    "trustee_user_id": "ef2cb1db2127439e969db6392c760262",
    "traefik_ingress_controller_tag": "v1.7.10",
    "trust_id": "******",
    "container_infra_prefix": "",
    "number_of_minions": "6",
    "tiller_tag": "v2.14.3",
    "boot_volume_type": "rbd",
    "ingress_controller_role": "ingress",
    "registry_insecure": "True",
    "master_kube_tag": "v1.14.6",
    "prometheus_tag": "v1.8.2",
    "OS::project_id": "21b4ae3a2ea44bc5a9c14005ed2963af",
    "kubecontroller_options": "",
    "fixed_network_cidr": "10.0.0.0/24",
    "insecure_registry_url": "",
    "auth_url": "https://cumulus.openstack.hpc.cam.ac.uk:5000/v3",
    "ostree_commit": "",
    "auto_healing_enabled": "False",
    "master_role": "master",
    "docker_volume_size": "0",
    "kubeapi_options": "",
    "kube_dashboard_version": "v1.8.3",
    "trustee_password": "******",
    "nodes_affinity_policy": "soft-anti-affinity",
    "minions_to_remove": "7,0",
    "octavia_ingress_controller_tag": "v1.15.0",
    "is_cluster_stack": "True",
    "OS::stack_name": "augustus-vwab7fqj6ofy",
    "max_node_count": "5",
    "system_pods_timeout": "5",
    "system_pods_initial_delay": "30",
    "dns_cluster_domain": "cluster.local",
    "flannel_network_cidr": "10.100.0.0/16",
    "calico_ipv4pool": "192.168.0.0/16",
    "openstack_ca": "******",
    "network_driver": "flannel",
    "monitoring_enabled": "True",
    "heat_container_agent_tag": "train-stable-1",
    "no_proxy": "",
    "discovery_url": "https://discovery.etcd.io/e41f3ad8b1d2fb2edd4cb9af73482102"
  },
  "outputs": [
    {
      "output_value": [
        "10.0.0.5",
        "10.0.0.19"
      ],
      "output_key": "kube_masters_private",
      "description": "This is a list of the \"private\" IP addresses of all the Kubernetes masters.\n"
    },
    {
      "output_value": [
        null,
        null
      ],
      "output_key": "kube_masters",
      "description": "This is a list of the \"public\" IP addresses of all the Kubernetes masters. Use these IP addresses to log in to the Kubernetes masters via ssh.\n"
    },
    {
      "output_value": "128.232.227.144",
      "output_key": "api_address",
      "description": "This is the API endpoint of the Kubernetes cluster. Use this to access the Kubernetes API.\n"
    },
    {
      "output_value": [
        "10.0.0.8",
        "10.0.0.4",
        "10.0.0.14",
        "10.0.0.29",
        "10.0.0.16",
        "10.0.0.7"
      ],
      "output_key": "kube_minions_private",
      "description": "This is a list of the \"private\" IP addresses of all the Kubernetes minions.\n"
    },
    {
      "output_value": [
        null,
        null,
        null,
        null,
        null,
        null
      ],
      "output_key": "kube_minions",
      "description": "This is a list of the \"public\" IP addresses of all the Kubernetes minions. Use these IP addresses to log in to the Kubernetes minions via ssh."
    },
    {
      "output_value": "localhost:5000",
      "output_key": "registry_address",
      "description": "This is the url of docker registry server where you can store docker images."
    }
  ],
  "links": [
    {
      "href": "https://cumulus.openstack.hpc.cam.ac.uk:8004/v1/21b4ae3a2ea44bc5a9c14005ed2963af/stacks/augustus-vwab7fqj6ofy/6f9678a1-bb4f-41bf-926d-b3a0052b1fa2",
      "rel": "self"
    }
  ],
  "parent": null,
  "disable_rollback": true,
  "deletion_time": null,
  "stack_user_project_id": "40f9fea95e4e4eb68374380d447bd2b8",
  "capabilities": [],
  "notification_topics": [],
  "tags": null,
  "timeout_mins": 60,
  "stack_owner": null
}
--END--


    -------------------------

    docker_storage_driver: overlay2                                                                                                                                                                                                                                                                                                                                                                              |
    docker_volume_size: '0'                                                                                                                                                                                                                                                                                                                                                                                      |
    docker_volume_type: rbd                                                                                                                                                                                                                                                                                                                                                                                      |

    volume type rdb

        Block device in the container linked to a Ceph filesystem service.

        Ceph RADOS Block Device Driver
        https://docs.ceph.com/docs/master/rbd/

        RADOS (Reliable Autonomic Distributed Object Store)
        https://searchstorage.techtarget.com/definition/RADOS-Reliable-Autonomic-Distributed-Object-Store

        Ceph in OpenStack
        https://docs.ceph.com/docs/master/rbd/rbd-openstack/

        Ceph in Kubernetes
        https://docs.ceph.com/docs/master/rbd/rbd-kubernetes/

    -------------------------

        ROOK
        https://rook.io/
        https://rook.io/docs/rook/v1.2/
        "Open-Source, Cloud-Native Storage for Kubernetes"
        "Production ready File, Block and Object Storage"

        CockroachDB
        https://www.cockroachlabs.com/
        "CockroachDB delivers resilient, consistent, distributed SQL at scale"

        Dinner

            Mix Kebab              £5.95
            Chicken Tikka Massala  £8.95
            Tarka Dhall            £3.95
            Pilau Rice             £2.50






