version: '3.7'

services:

    fedora:
        image:
            "aglais/fedora:${buildtag}"
        labels:
            uk.ac.roe.aglais.buildtag: "${buildtag}"
        build:
            context: 'fedora'

    openstack-client:
        image:
            "aglais/openstack-client:${buildtag}"
        labels:
            uk.ac.roe.aglais.buildtag: "${buildtag}"
        build:
            context: 'openstack-client'
        tty:
            true
        stdin_open:
            true
        read_only:
            false
        volumes:
            - /etc/localtime:/etc/localtime:ro
            - ${SSH_AUTH_SOCK}:/tmp/ssh_auth_sock
            - /bin/secret:/bin/secret
        environment:
            SSH_AUTH_SOCK: /tmp/ssh_auth_sock


    ansible-client:
        image:
            "aglais/ansible-client:${buildtag}"
        labels:
            uk.ac.roe.aglais.buildtag: "${buildtag}"
        build:
            context: 'ansible-client'
        tty:
            true
        stdin_open:
            true
        read_only:
            false
        volumes:
            - /etc/localtime:/etc/localtime:ro
            - ${SSH_AUTH_SOCK}:/tmp/ssh_auth_sock
            - /bin/secret:/bin/secret
        environment:
            SSH_AUTH_SOCK: /tmp/ssh_auth_sock



